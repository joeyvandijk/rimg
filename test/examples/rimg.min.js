"use strict";!function(){console||(console={log:function(){},error:function(){}}),Object.create||(Object.create=function(){function e(){}return function(t){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,o=function(){},n=function(){return i.apply(this instanceof o&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,n.prototype=new o,n});var e=function(){function e(e){if("string"==typeof e){var t=e.split(",");if(0===t.length)return l.status="error",console.error("Rimg: your breakpoint-definition "+e+" is invalid, check the documentation."),null;for(var i=[],o=0,n=t.length;n>o;){for(var r=t[o],s={src:[],width:-1,height:-1,pixelRatio:[],getSrc:function(e){var t=this.pixelRatio.length;if(0===t)return l.status="error",console.error("Rimg: missing a pixelRatio definition, check the documentation."),"";if(1===t)return this.src[0];if(2===t)return 1>=e?this.src[0]:this.src[1];for(var i=0,o=this.pixelRatio.length;o>i;){if(e===this.pixelRatio[i]||Math.round(e)===this.pixelRatio[i])return this.src[i];i++}return this.src[t-1]}},a=r.split(" "),d=0,c=a.length;c>d;){var u=a[d];""===u.replace(" ","")||(null!==u.match(/^[0-9]{0,4}w/gi)?s.width=Number(u.substr(0,u.length-1)):null!==u.match(/^[0-9]{0,4}h/gi)?s.height=Number(u.substr(0,u.length-1)):null!==u.match(/[0-9]{1}x/gi)?s.pixelRatio.push(Number(u.substr(0,u.length-1))):s.src.push(u)),d++}for(var f=0,h=i.length,g=!1;h>f;){var m=i[f];if(m.width===s.width&&-1!==m.width||m.height===s.height&&-1!==m.height){m.pixelRatio.push(s.pixelRatio[0]),m.src.push(s.src[0]),g=!0;break}f++}g||i.push(s),o++}return i.length>0?i:(l.status="error",console.error("Rimg: your breakpoint-definition misses valid breakpoints, check the documentation."),null)}return l.status="error",console.error("Rimg: your breakpoint-definition is not a String, check the documentation."),null}function t(e){l.imageEvents.changed--,"error"===e.type&&l.imageEvents.errors++,0===l.imageEvents.changed&&l.imagesLoaded&&l.imagesLoaded(l.imageEvents.errors>0?!0:!1)}function i(e,t,i,o){void 0===o&&(o=document),"resize"===t&&(o=window),l.isIE8?("DOMContentLoaded"===t&&(t="onreadystatechange"),"resize"===t&&(t="onresize"),"add"===e?o.attachEvent(t,i):o.detachEvent(t,i)):"add"===e?o.addEventListener(t,i,!1):o.removeEventListener(t,i,!1)}function o(e){for(var t=0,i=l.images.length,o=!1;i>t;){if(l.images[t]===e){o=!0;break}t++}o||l.images.push(e)}function n(e){var o=!0;if(!l.disableLazyLoading){var n=e.getBoundingClientRect();o=!(n.top+n.height<-l.offset.y||n.top>-l.offset.y+l.resizeDimensions.height+l.offset.y||n.left+n.width<-l.offset.x||n.left>-l.offset.x+l.resizeDimensions.width+l.offset.x)}var r=window.devicePixelRatio||1,s=e.getAttribute("data-src");if(null!==s&&o){var a=s.substr(0,s.lastIndexOf(".")),d=s.substr(s.lastIndexOf(".")),c={x:e.width,y:e.height};0===e.width&&(c.x=window.getComputedStyle(e,null).maxWidth,c.x=c.x.replace("px",""),c.x=Number(c.x)),0===e.height&&(c.y=window.getComputedStyle(e,null).maxHeight,c.y=c.y.replace("px",""),c.y=Number(c.y));for(var u,f=0,h=l.breakpoints.length;h>f;){var g=l.breakpoints[f],m=c.x;if(c.x<c.y,m<=g.width){u=g;break}f++}if(void 0===u&&(u=l.breakpoints[l.breakpoints.length-1]),e.getAttribute("src")!==a+u.getSrc(r)+d){var p=a+u.getSrc(r)+d;e.setAttribute("src",p),l.imageEvents.changed++,i("add","load",t,e),i("add","error",t,e)}}}function r(e){if("img"===e.nodeName.toLowerCase())o(e),n(e);else for(var t=0,i=e.children.length;i>t;){var s=e.children[t];r(s),t++}}function s(){for(var e=0,t=l.images.length;t>e;)n(l.images[e]),e++}function a(){var e,t;l.isIE8?(e=document.body.clientWidth,t=document.body.clientHeight):(e=window.innerWidth,t=window.innerHeight);var i=!1;return(l.resizeDimensions.width!==e||l.resizeDimensions.height!==t)&&(l.resizeDimensions.width=e,l.resizeDimensions.height=t,i=!0),i}function d(){clearTimeout(l.resizeInfo.wait),a()&&s(),l.resizeInfo.time=(new Date).getTime()}function c(e){this.execute(e.target)}var l={status:"init",observer:null,breakpoints:[],images:[],imageEvents:{changed:0,errors:0},imagesLoaded:null,offset:{x:100,y:100},resizeInfo:{wait:null,time:null},resizeDimensions:{width:0,height:0},disableIntrospection:!1,disableLazyLoading:!1,isIE8:!1};if(void 0===window.addEventListener&&(l.isIE8=!0),"undefined"!=typeof window.RimgOptions){var u=e(window.RimgOptions.breakpoint);null!==u&&(l.breakpoints=u),window.RimgOptions.disableIntrospection===!0&&(l.disableIntrospection=!0),window.RimgOptions.disableLazyLoading===!0&&(l.disableLazyLoading=!0),null!=window.RimgOptions.offset&&"number"==typeof window.RimgOptions.offset.x&&"number"==typeof window.RimgOptions.offset.y&&(l.offset.x=window.RimgOptions.offset.x,l.offset.y=window.RimgOptions.offset.y),null!=window.RimgOptions.complete&&"function"==typeof window.RimgOptions.complete&&(l.imagesLoaded=window.RimgOptions.complete),window.RimgOptions=void 0}else console.log("(remark) Rimg: no breakpoints defined (yet), check the documentation or manually adjust it.");return{version:"1.6.0",execute:function(e){if("error"===l.status)return void console.error("Rimg.execute(): error-status so no actions can be executed, check your code.");if(void 0===e)return void console.error("Rimg.execute(): undefined value, check your code to add a valid DOM element to this function.");if(0===l.breakpoints.length)return void console.log("(remark) Rimg.execute(): no breakpoints defined (yet), probably because of manual control.");if("#document"===e.nodeName)if(l.images.splice(0,l.images.length),e.childNodes.length>1){var t;if("HTML"!==e.childNodes[1].nodeName)for(var i=0,o=e.childNodes.length;o>i;){if("HTML"===e.childNodes[i].nodeName){t=e.childNodes[i];break}i++}else t=e.childNodes[1];if("BODY"!==t.childNodes[1].nodeName)for(var i=0,o=t.childNodes.length;o>i;){if("BODY"===t.childNodes[i].nodeName){r(t.childNodes[i]);break}i++}else r(t.childNodes[1])}else console.error("Rimg.execute(): not a valid DOM representation, check your code.");else void 0!==e&&void 0!==e.nodeName&&"img"===e.nodeName.toLowerCase()?r(e):void 0!==e[0]&&"img"===e[0].nodeName.toLowerCase()&&r(e[0])},configure:function(t){if(!(t instanceof Object))return void console.error("Rimg: your definition is not an object, check the documentation.");if(t.breakpoint){var i=e(t.breakpoint);null!==i&&(l.breakpoints=i)}t.disableIntrospection===!0&&(l.disableIntrospection=!0),t.disableLazyLoading===!0&&(l.disableLazyLoading=!0),null!=t.offset&&"number"==typeof t.offset.x&&"number"==typeof t.offset.y&&(l.offset.x=t.offset.x,l.offset.y=t.offset.y),"ready"!==l.status||l.disableIntrospection||(a(),this.execute(document))},resized:function(){"ready"===l.status&&(null!==l.resizeInfo.wait&&clearTimeout(l.resizeInfo.wait),null===l.resizeInfo.time||(new Date).getTime()-l.resizeInfo.time>1e3?d.bind(this)():l.resizeInfo.wait=setTimeout(d.bind(this),100))},scrolled:function(){l.disableLazyLoading||s()},loaded:function(){"progress"===l.status&&(l.isIE8&&"complete"!=document.readyState||(i("remove","DOMContentLoaded",this.loaded),a(),l.disableIntrospection||(null===l.observer?this.execute(document):(l.observer.observe(document.body,{attributes:!0,childList:!0,characterData:!1,subtree:!0,attributeFilter:["data-src"]}),this.execute(document)),i("add","resize",this.resized.bind(this))),l.disableLazyLoading||i("add","scroll",this.scrolled.bind(this)),l.status="ready"))},disableLazyLoading:function(){l.disableLazyLoading=!0},disableIntrospection:function(){l.disableIntrospection=!0,l.observer?l.observer.disconnect():i("remove","DOMNodeInserted",c)},initialize:function(){if("init"!==l.status)return void("error"!==l.status&&console.error("Rimg.initialize(): Already initialized. No forced initialization supported, check your code."));var e=this,t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;void 0===t||l.isIE8?(i("add","DOMAttrModified",function(t){e.execute(t.target)}),i("add","DOMNodeInserted",c.bind(e))):l.observer=new t(function(t){t.forEach(function(t){t.addedNodes.length>0?e.execute(t.addedNodes):"data-src"===t.attributeName&&e.execute(t.target)})}),l.status="progress","interactive"!==document.readyState&&"complete"!==document.readyState||!document.body?i("add","DOMContentLoaded",this.loaded.bind(this)):this.loaded.bind(this)()}}};window.Rimg=Object.create(e()),window.Rimg.initialize()}();